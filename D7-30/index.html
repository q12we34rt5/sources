<!DOCTYPE html>
<html>

<head>
    <title>一周年紀念</title>
    <link rel="icon" href="assets/icon.png">
    <meta charset="UTF-8">
    <script src="css-element-queries-1.2.1/src/ResizeSensor.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/earlyaccess/cwtexfangsong.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Parisienne&display=swap" rel="stylesheet">
    <style>
        html,
        body {
            background-color: rgb(255, 217, 223);
            margin: 0;
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
        }

        .title {
            width: 100%;
            height: 100%;
            display: flex;
            margin-bottom: 50vh;
        }

        .title>h1 {
            font-family: 'cwTeXFangSong', 'Parisienne', serif;
            font-size: 10vw;
            font-weight: 500;
            margin: auto;
        }

        .heart {
            background: #ff72c4;
            position: fixed;
            transform: rotate(45deg);
        }

        .heart::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            margin-left: -60%;
            background: #ff72c4;
            border-radius: 50% 0 0 50%;
        }

        .heart::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            margin-top: -60%;
            background: #ff72c4;
            border-radius: 50% 50% 0 0;
        }

        .card-container {
            width: 80vw;
            height: 40vw;
            margin: auto;
            z-index: 1;
            position: relative;
        }

        .card {
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.5);
            box-shadow: 0 0 0.5vw #00000055;
            margin-bottom: 10%;
            backdrop-filter: blur(5px);
            opacity: 0;
            transition-duration: 1s;
            position: relative;
            transform: translateY(50px);
        }

        .card-display {
            opacity: 1;
            transform: translateY(0);
        }

        .gallery {
            width: 60%;
            height: 80%;
            position: relative;
            overflow: hidden;
        }

        .gallery>.page-scroller {
            transition-duration: 1s;
        }

        .gallery>.page-scroller>.page {
            background-color: #000000;
            overflow: hidden;
            float: left;
        }

        .card-right {
            display: flex;
            overflow: hidden;
        }

        .card-right>.card-bg {
            left: 40%;
            width: 70%;
            position: absolute;
            z-index: -1;
        }

        .card-right>.text {
            width: 30%;
            height: 80%;
            margin: auto auto auto 5%;
        }

        .card-right>.gallery-container {
            width: 50%;
            height: 60%;
            margin: auto 5% auto auto;
            display: flex;
            background-color: white;
            border: 0.7vw solid white;
            box-shadow: 0.3vw 0.3vw 0.3vw rgba(0, 0, 0, 0.5);
        }

        .card-right>.gallery-container>.gallery {
            width: 100%;
            height: 100%;
            margin: auto;
        }

        .card-left {
            display: flex;
            overflow: hidden;
        }

        .card-left>.card-bg {
            left: 40%;
            width: 70%;
            position: absolute;
            z-index: -1;
        }

        .card-left>.text {
            width: 30%;
            height: 80%;
            margin: auto 5% auto auto;
        }

        .card-left>.gallery-container {
            width: 50%;
            height: 60%;
            margin: auto auto auto 5%;
            display: flex;
            background-color: white;
            border: 0.7vw solid white;
            box-shadow: 0.3vw 0.3vw 0.3vw rgba(0, 0, 0, 0.5);
        }

        .card-left>.gallery-container>.gallery {
            width: 100%;
            height: 100%;
            margin: auto;
        }

        .text {
            position: relative;
        }

        .text>h1 {
            width: 100%;
            font-family: 'cwTeXFangSong', serif;
            font-size: 3.5vw;
        }

        .text>div {
            width: 100%;
            font-family: 'cwTeXFangSong', serif;
            font-size: 2vw;
            line-height: 1.5;
        }

        .text>.left-date {
            font-family: 'cwTeXFangSong', 'Parisienne', serif;
            text-align: left;
            position: absolute;
            top: 98%;
        }

        .text>.right-date {
            font-family: 'cwTeXFangSong', 'Parisienne', serif;
            text-align: right;
            position: absolute;
            top: 98%;
        }

        .text-invisible {
            transition-duration: 1s;
            transform: translateY(-50px);
            opacity: 0;
        }

        .text-display {
            transform: translateY(0px);
            opacity: 1;
        }

        .card-text {
            display: flex;
        }

        .card-text>.bg {
            width: 100%;
            position: absolute;
            height: 100%;
        }

        .card-text>.text {
            width: 85%;
            height: 80%;
            margin: auto;
        }

        .card-text>.text>h1 {
            margin-bottom: 0;
            text-align: center;
            font-family: 'cwTeXFangSong', 'Parisienne', serif;
        }

        .text>.last-date {
            font-family: 'cwTeXFangSong', 'Parisienne', serif;
            text-align: right;
            position: absolute;
            top: 92%;
        }
    </style>

</head>

<body>

    <script>
        function parseElement(html) {
            var htmlContainer = document.createElement('html');
            htmlContainer.innerHTML = html;
            return htmlContainer.childNodes[1].childNodes[0];
        }
        function createHeart() {
            let initTop = Math.random() * 100 + 100;
            let size = (Math.random() * 50),
                left = (Math.random() * 100),
                top = initTop;
            let element = parseElement(
                `<div class="heart" style="left:${left}vw;top:${initTop}vh;width:${size}px;height:${size}px"></div>`
            );
            document.body.appendChild(element);
            setInterval(() => {
                top -= 0.001 * size;
                element.style.top = top + "vh";
                if (top < -10) top = initTop;
            }, 10);
        }
        for (let i = 0; i < 100; i++)
            createHeart();
    </script>

    <script>
        class makeGallery {
            constructor(element) {
                this.element = element;
                this.scroller = element.querySelector(".page-scroller");
                this.pages = element.querySelectorAll(".page");
                this.setGallerySize();
                new ResizeSensor(this.element, () => {
                    this.setGallerySize();
                    this.setScrollerPosition();
                });
                this.page_count = this.pages.length;
                this.current_page = 0;
                this.autoPageScroll = setInterval(() => {
                    this.moveNext();
                }, 5000);
                this.mouseDrop();
            }
            mouseDrop = () => {
                let mouseX = 0;
                let offsetX = 0;
                let isDown = false;
                let initX = 0;
                this.scroller.addEventListener('mousedown', e => {
                    isDown = true;
                    mouseX = e.pageX;
                    initX = parseInt(this.scroller.style.marginLeft);
                    document.addEventListener('mousemove', move)
                    if (this.autoPageScroll) {
                        clearInterval(this.autoPageScroll);
                        this.autoPageScroll = null;
                    }
                    this.scroller.style.transitionDuration = "0s";
                });
                document.addEventListener('mouseup', e => {
                    isDown = false;
                    document.removeEventListener('mousemove', move)
                    if (this.autoPageScroll == null) {
                        this.autoPageScroll = setInterval(() => {
                            this.moveNext();
                        }, 5000);
                    }
                    this.scroller.style.transitionDuration = "1s";
                    const transitionPages = Math.floor(-parseInt(this.scroller.style.marginLeft) / this.element.offsetWidth + 0.5);
                    this.current_page = (transitionPages + this.page_count * 5) % this.page_count;
                    this.setScrollerPosition();
                });
                const move = (e) => {
                    if (e.pageX < document.body.clientWidth)
                        if (isDown) {
                            const dx = e.pageX - mouseX;
                            this.scroller.style.marginLeft = `${initX + dx}px`;
                        }
                }
            }
            setGallerySize = () => {
                // set page size
                this.pages.forEach(page => {
                    page.style.width = this.element.offsetWidth + "px";
                    page.style.height = this.element.offsetHeight + "px";
                });
                this.scroller.style.width = this.page_count * this.element.offsetWidth + "px";
                this.scroller.style.height = this.element.offsetHeight + "px";
            }
            moveNext = () => {
                this.current_page = (this.current_page + 1) % this.page_count;
                this.setScrollerPosition();
            }
            movePrevious = () => {
                this.current_page = (this.current_page + this.page_count - 1) % this.page_count;
                this.setScrollerPosition();
            }
            setScrollerPosition = () => {
                this.scroller.style.marginLeft = -this.current_page * this.element.offsetWidth + "px";
            }
        }
    </script>

    <script>
        function appendImages(file_list, container) {
            file_list.forEach(elem => {
                const htmlElemStr = `
                    <div class="page">
                        <img src="${elem.file}" ondragstart="return false;">
                    </div>
                `;
                const page = parseElement(htmlElemStr);
                const img = page.querySelector('img');
                img.addEventListener('load', (event) => {
                    setTimeout(() => {
                        const wh_ratio = page.offsetWidth / page.offsetHeight;
                        if (img.naturalWidth > wh_ratio * img.naturalHeight) {
                            // set height 100%
                            img.style.height = `${100 * elem.size}%`;
                        } else {
                            // set width 100%
                            img.style.width = `${100 * elem.size}%`;
                        }
                        img.style.marginLeft = `${elem.offsetX}%`;
                        img.style.marginTop = `${elem.offsetY}%`;
                    }, 500);
                });
                container.appendChild(page);
            });
        }
    </script>

    <div class="card-container">
        <div class="title">
            <h1>相簿/一周年</h1>
        </div>
        <div class="card card-right">
            <div class="text">
                <h1 class="text-invisible">十分</h1>
                <div class="text-invisible">這應該是我們去過最遠的地方</div>
                <div class="text-invisible">吧？還是基隆其實比較遠？</div>
                <div class="text-invisible">整理照片的時候真的覺得我的</div>
                <div class="text-invisible">表情看起來好怪 XD</div>
                <div class="text-invisible">對這裡真的印象深刻，很喜歡</div>
                <div class="text-invisible">這種風景區，謝謝妳把行程規</div>
                <div class="text-invisible">畫得這麼完美。</div>
                <div class="text-invisible left-date">2020/7/9</div>
            </div>
            <div class="gallery-container text-invisible">
                <div class="gallery">
                    <div class="page-scroller" id="gallery-pages-s">
                    </div>
                </div>
            </div>
            <script>
                const file_list_s = [
                    { file: 'assets/shifen/IMG20200709140525.jpg', size: 1, offsetX: 0, offsetY: -30, },
                    { file: 'assets/shifen/IMG20200709142156.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/shifen/IMG20200709142336.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/shifen/IMG20200709142418.jpg', size: 1, offsetX: 0, offsetY: -23, },
                    { file: 'assets/shifen/IMG20200709142449.jpg', size: 1, offsetX: 0, offsetY: -30, },
                    { file: 'assets/shifen/IMG20200709142457.jpg', size: 1, offsetX: 0, offsetY: -40, },
                    { file: 'assets/shifen/IMG20200709142744.jpg', size: 1, offsetX: 0, offsetY: -5, },
                    { file: 'assets/shifen/IMG20200709142850.jpg', size: 1.2, offsetX: -5, offsetY: -40, },
                    { file: 'assets/shifen/IMG20200709142922.jpg', size: 1.2, offsetX: -15, offsetY: -15, },
                    { file: 'assets/shifen/IMG20200709142932.jpg', size: 1, offsetX: 0, offsetY: -45, },
                    { file: 'assets/shifen/IMG20200709144722.jpg', size: 1, offsetX: 0, offsetY: -30, },
                    { file: 'assets/shifen/IMG20200709144727.jpg', size: 1, offsetX: 0, offsetY: -25, },
                ];
                const container_s = document.getElementById('gallery-pages-s');
                appendImages(file_list_s, container_s);
            </script>
        </div>
        <div class="card card-left">
            <div class="gallery-container text-invisible">
                <div class="gallery">
                    <div class="page-scroller" id="gallery-pages-d">
                    </div>
                </div>
            </div>
            <div class="text">
                <h1 class="text-invisible">第一天</h1>
                <div class="text-invisible">雖然這天拍的照片少的可憐，</div>
                <div class="text-invisible">但實在是太重要了 XD</div>
                <div class="text-invisible">而且妳也很難得的穿了短褲。</div>
                <div class="text-invisible">雖然記憶力很糟，但還是記得</div>
                <div class="text-invisible">妳那天特別可愛的感覺 XD</div>
                <div class="text-invisible">這也是我印象最深刻的一天。</div>
                <div class="text-invisible right-date">2020/7/30</div>
            </div>
            <script>
                const file_list_d = [
                    { file: 'assets/d730/IMG20200730145913.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/d730/IMG20200730150013.jpg', size: 1, offsetX: 0, offsetY: 0, },
                ];
                const container_d = document.getElementById('gallery-pages-d');
                appendImages(file_list_d, container_d);
            </script>
        </div>
        <div class="card card-right">
            <div class="text">
                <h1 class="text-invisible">袖珍博物館</h1>
                <div class="text-invisible">我記得這天應該有拍不少照片</div>
                <div class="text-invisible">才對，可能都是妳拍的吧。</div>
                <div class="text-invisible">可惜我手機裡只有幾張。</div>
                <div class="text-invisible">我還記得這天體感時間特別短</div>
                <div class="text-invisible">XD</div>
                <div class="text-invisible left-date">2020/8/6</div>
            </div>
            <div class="gallery-container text-invisible">
                <div class="gallery">
                    <div class="page-scroller" id="gallery-pages-1">
                    </div>
                </div>
            </div>
            <script>
                const file_list_1 = [
                    { file: 'assets/test/1.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test/2.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test/3.jpg', size: 1, offsetX: 0, offsetY: -40, },
                    { file: 'assets/test/4.jpg', size: 1, offsetX: 0, offsetY: -5, },
                ];
                const container_1 = document.getElementById('gallery-pages-1');
                appendImages(file_list_1, container_1);
            </script>
        </div>
        <div class="card card-left">
            <div class="gallery-container text-invisible">
                <div class="gallery">
                    <div class="page-scroller" id="gallery-pages-3">
                    </div>
                </div>
            </div>
            <div class="text">
                <h1 class="text-invisible">淡水</h1>
                <div class="text-invisible">真的是難得有拍一堆照片，重</div>
                <div class="text-invisible">點還是是有拍人的 XD</div>
                <div class="text-invisible">沒記錯我第一次計畫行程應該</div>
                <div class="text-invisible">是北投吧，但是印象最深刻的</div>
                <div class="text-invisible">卻是淡水。</div>
                <div class="text-invisible">還記得夕陽很好看，但是拍起</div>
                <div class="text-invisible">來啥都看不出來沒有，還是妳</div>
                <div class="text-invisible">比較美 XD</div>
                <div class="text-invisible right-date">2020/8/20</div>
            </div>
            <script>
                const file_list_3 = [
                    { file: 'assets/tamsui/20200820_162338.jpg', size: 1, offsetX: 0, offsetY: -8, },
                    { file: 'assets/tamsui/20200820_162416.jpg', size: 1, offsetX: 0, offsetY: -15, },
                    { file: 'assets/tamsui/20200820_162439.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/tamsui/20200820_162528.jpg', size: 1, offsetX: 0, offsetY: -15, },
                    { file: 'assets/tamsui/20200820_162548.jpg', size: 1, offsetX: 0, offsetY: -15, },
                    { file: 'assets/tamsui/20200820_162559.jpg', size: 1, offsetX: 0, offsetY: -15, },
                    { file: 'assets/tamsui/20200820_162620.jpg', size: 1, offsetX: 0, offsetY: -15, },
                    { file: 'assets/tamsui/20200820_162636.jpg', size: 1, offsetX: 0, offsetY: -5, },
                    { file: 'assets/tamsui/20200820_162656.jpg', size: 1, offsetX: 0, offsetY: -15, },
                    { file: 'assets/tamsui/20200820_162729.jpg', size: 1, offsetX: 0, offsetY: -15, },
                    { file: 'assets/tamsui/20200820_162749.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/tamsui/20200820_162811.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/tamsui/20200820_162827.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/tamsui/20200820_162915.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/tamsui/20200820_162948.jpg', size: 1, offsetX: 0, offsetY: -5, },
                    { file: 'assets/tamsui/20200820_163132.jpg', size: 1, offsetX: 0, offsetY: -24, },
                    { file: 'assets/tamsui/IMG20200820112714.jpg', size: 1, offsetX: 0, offsetY: -40, },
                    { file: 'assets/tamsui/IMG20200820113933.jpg', size: 1, offsetX: 0, offsetY: -40, },
                    { file: 'assets/tamsui/IMG20200820113935.jpg', size: 1, offsetX: 0, offsetY: -40, },
                    { file: 'assets/tamsui/IMG20200820113957.jpg', size: 1, offsetX: 0, offsetY: -35, },
                    { file: 'assets/tamsui/IMG20200820113959.jpg', size: 1, offsetX: 0, offsetY: -35, },
                    { file: 'assets/tamsui/IMG20200820113961.jpg', size: 1, offsetX: 0, offsetY: -30, },
                    { file: 'assets/tamsui/IMG20200820120000.jpg', size: 1, offsetX: 0, offsetY: -5, },
                    { file: 'assets/tamsui/IMG20200820120001.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/tamsui/IMG20200820120003.jpg', size: 1, offsetX: 0, offsetY: -20, },
                    { file: 'assets/tamsui/IMG20200820140023.jpg', size: 1, offsetX: 0, offsetY: -35, },
                    { file: 'assets/tamsui/IMG20200820140024.jpg', size: 1, offsetX: 0, offsetY: -35, },
                    { file: 'assets/tamsui/IMG20200820140025.jpg', size: 1, offsetX: 0, offsetY: -35, },
                    { file: 'assets/tamsui/IMG20200820140027.jpg', size: 1, offsetX: 0, offsetY: -45, },
                    { file: 'assets/tamsui/IMG20200820143712.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/tamsui/IMG20200820161741.jpg', size: 1, offsetX: 0, offsetY: -25, },
                    { file: 'assets/tamsui/IMG20200820161746.jpg', size: 1, offsetX: 0, offsetY: -35, },
                    { file: 'assets/tamsui/IMG20200820161751.jpg', size: 1, offsetX: 0, offsetY: -40, },
                    { file: 'assets/tamsui/IMG20200820161801.jpg', size: 1, offsetX: 0, offsetY: -30, },
                    { file: 'assets/tamsui/IMG20200820161809.jpg', size: 1, offsetX: 0, offsetY: -40, },
                    { file: 'assets/tamsui/IMG20200820163225.jpg', size: 1, offsetX: 0, offsetY: -15, },
                    { file: 'assets/tamsui/IMG20200820163323.jpg', size: 1, offsetX: 0, offsetY: -3, },
                    { file: 'assets/tamsui/IMG20200820163349.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/tamsui/IMG20200820163425.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/tamsui/IMG20200820180647.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/tamsui/IMG20200820181552.jpg', size: 1, offsetX: 0, offsetY: -25, },
                    { file: 'assets/tamsui/IMG20200820181552_01.jpg', size: 1, offsetX: 0, offsetY: -25, },
                    { file: 'assets/tamsui/IMG20200820181612.jpg', size: 1, offsetX: 0, offsetY: -35, },
                    { file: 'assets/tamsui/IMG20200820185458.jpg', size: 1, offsetX: 0, offsetY: -10, },
                ];
                const container_3 = document.getElementById('gallery-pages-3');
                appendImages(file_list_3, container_3);
            </script>
        </div>
        <div class="card card-right">
            <div class="text">
                <h1 class="text-invisible">新月橋</h1>
                <div class="text-invisible">好吧，原諒我真的忘了這天原</div>
                <div class="text-invisible">本是去哪邊。但我還記得，這</div>
                <div class="text-invisible">應該是我們第一次貼這麼近拍</div>
                <div class="text-invisible">照，應該也是第一次這樣躺在</div>
                <div class="text-invisible">妳肩上吧，真的很開心。</div>
                <div class="text-invisible">希望我沒記錯 XD</div>
                <div class="text-invisible left-date">2020/10/2</div>
            </div>
            <div class="gallery-container text-invisible">
                <div class="gallery">
                    <div class="page-scroller" id="gallery-pages-n">
                    </div>
                </div>
            </div>
            <script>
                const file_list_n = [
                    { file: 'assets/crescent-bridge/IMG20201002173659.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/crescent-bridge/IMG20201002173719.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/crescent-bridge/IMG20201002173755.jpg', size: 1, offsetX: 0, offsetY: -35, },
                    { file: 'assets/crescent-bridge/IMG20201002173817.jpg', size: 1, offsetX: 0, offsetY: -5, },
                    { file: 'assets/crescent-bridge/IMG20201002173837.jpg', size: 1, offsetX: 0, offsetY: -10, },
                ];
                const container_n = document.getElementById('gallery-pages-n');
                appendImages(file_list_n, container_n);
            </script>
        </div>
        <div class="card card-left">
            <div class="gallery-container text-invisible">
                <div class="gallery">
                    <div class="page-scroller" id="gallery-pages-4">
                    </div>
                </div>
            </div>
            <div class="text">
                <h1 class="text-invisible">碧潭</h1>
                <div class="text-invisible">這應該是走最多路的一次，我</div>
                <div class="text-invisible">還記得那時候在步道那邊的涼</div>
                <div class="text-invisible">亭抱了妳很久，很滿足，好像</div>
                <div class="text-invisible">還害別人不敢來涼亭坐著 XD</div>
                <div class="text-invisible">雖然照片被手擋到一點點，但</div>
                <div class="text-invisible">妳實在是太可愛了，所以一定</div>
                <div class="text-invisible">要放一下這幾張照片。</div>
                <div class="text-invisible right-date">2021/1/26</div>
            </div>
            <script>
                const file_list_4 = [
                    { file: 'assets/bitan/IMG20210126101814.jpg', size: 1, offsetX: 0, offsetY: -30, },
                    { file: 'assets/bitan/IMG20210126101831.jpg', size: 1, offsetX: 0, offsetY: -20, },
                    { file: 'assets/bitan/IMG20210126101932.jpg', size: 1, offsetX: 0, offsetY: -8, },
                    { file: 'assets/bitan/IMG20210126102041.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/bitan/IMG20210126102558.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/bitan/IMG20210126110436.jpg', size: 1, offsetX: 0, offsetY: -15, },
                    { file: 'assets/bitan/IMG20210126111011.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/bitan/IMG20210126111038.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/bitan/IMG20210126155805.jpg', size: 1, offsetX: 0, offsetY: 0, },
                ];
                const container_4 = document.getElementById('gallery-pages-4');
                appendImages(file_list_4, container_4);
            </script>
        </div>
        <div class="card card-right">
            <div class="text">
                <h1 class="text-invisible">基隆/和平島</h1>
                <div class="text-invisible">這裡真的比我想像中的漂亮，</div>
                <div class="text-invisible">也因此妳會想拍照，不然妳的</div>
                <div class="text-invisible">照片真的好少 XD</div>
                <div class="text-invisible">早上的時候人很少，很舒服，</div>
                <div class="text-invisible">原本想坐在涼亭裡抱妳的，只</div>
                <div class="text-invisible">是後來人變一堆，只好算了。</div>
                <div class="text-invisible left-date">2021/2/19</div>
            </div>
            <div class="gallery-container text-invisible">
                <div class="gallery">
                    <div class="page-scroller" id="gallery-pages-5">
                    </div>
                </div>
            </div>
            <script>
                const file_list_5 = [
                    { file: 'assets/peace-island/IMG20210219115643.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/peace-island/IMG20210219094307.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/peace-island/IMG20210219094442.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/peace-island/IMG20210219094619.jpg', size: 1, offsetX: 0, offsetY: -5, },
                    { file: 'assets/peace-island/IMG20210219094650.jpg', size: 1, offsetX: 0, offsetY: -5, },
                    { file: 'assets/peace-island/IMG20210219095033.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/peace-island/IMG20210219095543.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/peace-island/IMG20210219095620.jpg', size: 1, offsetX: 0, offsetY: -5, },
                    { file: 'assets/peace-island/IMG20210219095637.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/peace-island/IMG20210219095755.jpg', size: 1, offsetX: 0, offsetY: -20, },
                    { file: 'assets/peace-island/IMG20210219095847.jpg', size: 1, offsetX: 0, offsetY: -20, },
                    { file: 'assets/peace-island/IMG20210219095940.jpg', size: 1, offsetX: 0, offsetY: -32, },
                    { file: 'assets/peace-island/IMG20210219100018.jpg', size: 1, offsetX: 0, offsetY: -30, },
                    { file: 'assets/peace-island/IMG20210219100027.jpg', size: 1, offsetX: 0, offsetY: -30, },
                    { file: 'assets/peace-island/IMG20210219100229.jpg', size: 1, offsetX: 0, offsetY: -5, },
                    { file: 'assets/peace-island/IMG20210219100315.jpg', size: 1, offsetX: 0, offsetY: -5, },
                    { file: 'assets/peace-island/IMG20210219100359.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/peace-island/IMG20210219100551.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/peace-island/IMG20210219100708.jpg', size: 1, offsetX: 0, offsetY: -15, },
                    { file: 'assets/peace-island/IMG20210219100827.jpg', size: 1, offsetX: 0, offsetY: -5, },
                    { file: 'assets/peace-island/IMG20210219100900.jpg', size: 1, offsetX: 0, offsetY: -5, },
                ];
                const container_5 = document.getElementById('gallery-pages-5');
                appendImages(file_list_5, container_5);
            </script>
        </div>
        <div class="card card-left">
            <div class="gallery-container text-invisible">
                <div class="gallery">
                    <div class="page-scroller" id="gallery-pages-2">
                    </div>
                </div>
            </div>
            <div class="text">
                <h1 class="text-invisible">士林官邸</h1>
                <div class="text-invisible">那個時候還沒有很懂為甚麼妳</div>
                <div class="text-invisible">一定要安排行程，後來才知道</div>
                <div class="text-invisible">妳是因為如果沒有好的理由會</div>
                <div class="text-invisible">無法出門。</div>
                <div class="text-invisible">雖然過很久了，但我還是想好</div>
                <div class="text-invisible">好道歉，那天真的很抱歉，我</div>
                <div class="text-invisible">的反應讓妳感覺很糟糕，但真</div>
                <div class="text-invisible">的完全是我的問題，對不起。</div>
                <div class="text-invisible right-date">2021/4/4</div>
            </div>
            <script>
                const file_list_2 = [
                    { file: 'assets/test2/IMG20210404084440.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404084953.jpg', size: 1, offsetX: 0, offsetY: -25, },
                    { file: 'assets/test2/IMG20210404085028.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404085324.jpg', size: 1, offsetX: 0, offsetY: -25, },
                    { file: 'assets/test2/IMG20210404085530.jpg', size: 1, offsetX: 0, offsetY: -8, },
                    { file: 'assets/test2/IMG20210404085813.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/test2/IMG20210404090035.jpg', size: 1, offsetX: 0, offsetY: -45, },
                    { file: 'assets/test2/IMG20210404090256.jpg', size: 1, offsetX: 0, offsetY: -35, },
                    { file: 'assets/test2/IMG20210404090322.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/test2/IMG20210404090529.jpg', size: 1, offsetX: 0, offsetY: -45, },
                    { file: 'assets/test2/IMG20210404090542.jpg', size: 1, offsetX: 0, offsetY: -30, },
                    { file: 'assets/test2/IMG20210404090610.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/test2/IMG20210404090627.jpg', size: 1, offsetX: 0, offsetY: -35, },
                    { file: 'assets/test2/IMG20210404091005.jpg', size: 1, offsetX: 0, offsetY: -35, },
                    { file: 'assets/test2/IMG20210404091248.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404091602.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404091821.jpg', size: 1, offsetX: 0, offsetY: -15, },
                    { file: 'assets/test2/IMG20210404094150.jpg', size: 1, offsetX: 0, offsetY: -35, },
                    { file: 'assets/test2/IMG20210404094211.jpg', size: 1, offsetX: 0, offsetY: -35, },
                    { file: 'assets/test2/IMG20210404094212.jpg', size: 1, offsetX: 0, offsetY: -35, },
                    { file: 'assets/test2/IMG20210404094309.jpg', size: 1, offsetX: 0, offsetY: -45, },
                    { file: 'assets/test2/IMG20210404094315.jpg', size: 1, offsetX: 0, offsetY: -10, },
                    { file: 'assets/test2/IMG20210404094329.jpg', size: 1, offsetX: 0, offsetY: -30, },
                    { file: 'assets/test2/IMG20210404094334.jpg', size: 1, offsetX: 0, offsetY: -40, },
                    { file: 'assets/test2/IMG20210404095638.jpg', size: 1, offsetX: 0, offsetY: -15, },
                    { file: 'assets/test2/IMG20210404095719.jpg', size: 1, offsetX: 0, offsetY: -12 },
                    { file: 'assets/test2/IMG20210404095728.jpg', size: 1, offsetX: 0, offsetY: -12, },
                    { file: 'assets/test2/IMG20210404095843.jpg', size: 1, offsetX: 0, offsetY: -40, },
                    { file: 'assets/test2/IMG20210404100152.jpg', size: 1, offsetX: 0, offsetY: -15, },
                    { file: 'assets/test2/IMG20210404100205.jpg', size: 1, offsetX: 0, offsetY: -20, },
                    { file: 'assets/test2/IMG20210404100223.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404100240.jpg', size: 1, offsetX: 0, offsetY: -30, },
                    { file: 'assets/test2/IMG20210404100302.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404100326.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404100332.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404100343.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404100351.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404100359.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404100403.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404100411.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404100419.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404100431.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404100439.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404100514.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404100529.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404100543.jpg', size: 1, offsetX: 0, offsetY: 0, },
                    { file: 'assets/test2/IMG20210404100548.jpg', size: 1, offsetX: 0, offsetY: 0, },
                ];
                const container_2 = document.getElementById('gallery-pages-2');
                appendImages(file_list_2, container_2);
            </script>
        </div>
        <div class="card card-text">
            <svg class="bg" viewBox="0 0 191.22144 101.241" width="191.22144" height="101.241"
                xmlns="http://www.w3.org/2000/svg">
                <metadata id="metadata15">image/svg+xml</metadata>
                <defs>
                    <pattern height="100" width="100" y="0" x="0" patternUnits="userSpaceOnUse" id="gridpattern">
                        <image height="00" width="100" y="0" x="0" />
                    </pattern>
                </defs>
                <g>
                    <title>Layer 1</title>
                    <path fill="none" fill-rule="evenodd" stroke="#000000" stroke-width="1px" id="path3180"
                        d="m50.678768,95.573318l-42.939658,0c-4.19425,0 -7.07555,-1.635269 -7.17993,-5.905891l-0.05918,-76.860617c0.03974,-4.66773 1.96692,-6.32404 7.61654,-6.280921l43.245769,0" />
                    <g id="g3183">
                        <path fill="#000000" fill-rule="evenodd" stroke-width="1px" id="path3182"
                            d="m61.926056,5.828645c1.828739,-0.56451 2.640602,-1.47219 2.751518,-2.67949c0.159828,-1.75644 -2.764709,-2.56232 -4.26712,-1.85847c-0.904289,0.42365 -2.095928,1.47711 -2.161728,2.73093c0.137569,2.8843 2.017838,4.21234 4.40411,4.6426c4.62978,0.83478 12.369923,-4.74316 18.284389,-5.69803c6.083313,-0.98212 8.542313,1.44229 9.930008,3.26747c-2.890495,-1.99957 -6.32354,-2.46037 -9.085617,-2.01396c-6.337471,1.02428 -12.225945,6.74202 -19.129501,5.91514c-3.50687,-0.54132 -6.357719,-3.37911 -5.4412,-6.72766c1.440739,-4.681 7.028343,-3.91888 7.871872,-1.41317c0.849831,2.52439 -1.275204,4.00002 -3.156731,3.83464z" />
                        <path fill="#000000" fill-rule="evenodd" stroke-width="1px"
                            d="m94.512985,1.946365c-0.761833,-0.08503 -1.547264,0.29658 -1.975143,1.43832c-0.082474,-0.81974 -0.799995,-1.24941 -1.536949,-1.2661c-2.365356,0.48913 -1.691879,2.85937 -0.553581,4.08235c0.990776,1.064449 2.174301,2.07706 2.69545,2.937679c0.643555,-1.1963 0.865097,-1.14131 1.56205,-1.958839c-1.325798,-1.65028 -0.111816,-3.276561 1.770653,-2.870811c0.223671,-1.11122 -0.839256,-2.23724 -1.962479,-2.3626z"
                            id="path3184" />
                        <path fill="#000000" fill-rule="evenodd" stroke-width="1px"
                            d="m92.737984,7.745625c-10.163826,-5.139491 -14.065987,0.793509 -11.601028,4.44794c-1.208122,-3.89143 1.690536,-5.42858 4.414833,-5.344501c4.586487,0.14155 8.48584,2.861421 10.130646,3.55962l-2.94445,-2.663059z"
                            id="path3186" />
                        <path fill="#000000" fill-rule="evenodd" stroke-width="1px" id="path3188"
                            d="m94.103745,6.525895c0.706627,1.17625 2.310814,2.4751 2.763222,4.04527c1.051735,-1.62312 2.793442,-2.40903 3.573219,-3.68193c0.928726,-1.449031 -1.955818,-3.41064 -2.947403,-1.166631c0.376831,-2.81913 -4.59214,-1.48299 -3.389038,0.80329z" />
                        <path fill="#000000" fill-rule="evenodd" stroke-width="1px"
                            d="m98.710007,7.676225c10.163826,-5.13949 14.551758,0.86291 12.0868,4.517341c1.208115,-3.89143 -1.690544,-5.42858 -4.414841,-5.344501c-4.586479,0.14155 -8.069458,2.23686 -9.714272,3.490231l2.042313,-2.663071z"
                            id="path3190" />
                        <path fill="#000000" fill-rule="evenodd" stroke-width="1px"
                            d="m58.173523,6.054335c-6.038658,-5.1395 -10.56234,2.49779 -5.521809,3.870251c-1.63295,-1.111441 -1.745609,-2.911571 -0.703129,-3.888571c1.259258,-0.8385 2.8288,-0.66758 4.367649,0.17372c1.37373,0.89451 2.422871,2.13741 3.038719,2.57742l-1.181431,-2.732821z"
                            id="path3192" />
                        <path fill="#000000" fill-rule="evenodd" stroke-width="1px" id="path3194"
                            d="m128.627472,6.383805c-1.828758,-0.56451 -2.640625,-1.472191 -2.751534,-2.67949c-0.159821,-1.75644 2.764702,-2.56232 4.267113,-1.85847c0.904297,0.42365 2.095947,1.47711 2.161728,2.73093c-0.137558,2.8843 -2.017838,4.21234 -4.404106,4.6426c-4.629776,0.834781 -12.369911,-4.74316 -18.284386,-5.69803c-6.083313,-0.98212 -8.542313,1.44229 -9.930016,3.267471c2.890503,-1.999571 6.323555,-2.460371 9.085625,-2.013961c6.337471,1.024281 12.225937,6.742021 19.129501,5.91514c3.506866,-0.54132 6.357712,-3.379109 5.441193,-6.72766c-1.440735,-4.681 -7.028328,-3.91888 -7.871864,-1.41317c-0.849831,2.52439 1.2752,4.00002 3.156746,3.83464z" />
                        <path fill="#000000" fill-rule="evenodd" stroke-width="1px"
                            d="m132.713455,6.442755c6.038666,-5.13949 9.457474,0.951 6.715057,3.03057c1.143768,-2.39532 -0.507431,-3.94145 -2.126022,-3.85737c-2.724991,0.14155 -4.793228,2.861421 -5.770462,3.559621l1.181427,-2.732821z"
                            id="path3196" />
                    </g>
                    <g id="g3193">
                        <path fill="#000000" fill-rule="evenodd" stroke-width="1px" id="path3195"
                            d="m61.771584,94.876076c1.828739,-0.564514 2.640602,-1.472191 2.751518,-2.679489c0.159828,-1.756447 -2.764709,-2.562325 -4.26712,-1.858475c-0.904289,0.423653 -2.095928,1.477112 -2.161728,2.730934c0.137569,2.8843 2.017838,4.212341 4.40411,4.642593c4.62978,0.834785 12.369923,-4.743156 18.284389,-5.698029c6.083313,-0.982117 8.542313,1.442291 9.930008,3.267471c-2.890495,-1.999573 -6.32354,-2.460373 -9.085617,-2.013962c-6.337471,1.024284 -12.225945,6.74202 -19.129501,5.915146c-3.50687,-0.541321 -6.357719,-3.379112 -5.4412,-6.727661c1.440739,-4.681 7.028343,-3.918884 7.871872,-1.41317c0.849831,2.524391 -1.275204,4.000015 -3.156731,3.834641z" />
                        <path fill="#000000" fill-rule="evenodd" stroke-width="1px"
                            d="m94.358513,90.99379c-0.761833,-0.08503 -1.547264,0.296585 -1.975143,1.438324c-0.082474,-0.81974 -0.799995,-1.249413 -1.536949,-1.266098c-2.365356,0.489128 -1.691879,2.859367 -0.553581,4.082352c0.990776,1.064445 2.174301,2.077057 2.69545,2.937675c0.643555,-1.196297 0.865097,-1.141312 1.56205,-1.958839c-1.325798,-1.650284 -0.111816,-3.276558 1.770653,-2.870811c0.223671,-1.111221 -0.839256,-2.237236 -1.962479,-2.362602z"
                            id="path3197" />
                        <path fill="#000000" fill-rule="evenodd" stroke-width="1px"
                            d="m92.583511,96.793053c-10.163826,-5.139488 -14.065987,0.79351 -11.601028,4.447945c-1.208122,-3.891434 1.690536,-5.428581 4.414833,-5.344505c4.586487,0.141548 8.48584,2.86142 10.130646,3.559624l-2.94445,-2.663063z"
                            id="path3199" />
                        <path fill="#000000" fill-rule="evenodd" stroke-width="1px" id="path3201"
                            d="m93.949272,95.573326c0.706627,1.176247 2.310814,2.475098 2.763222,4.045265c1.051735,-1.623116 2.793442,-2.409027 3.573219,-3.681931c0.928726,-1.449028 -1.955818,-3.410637 -2.947403,-1.166626c0.376831,-2.81913 -4.59214,-1.482994 -3.389038,0.803291z" />
                        <path fill="#000000" fill-rule="evenodd" stroke-width="1px"
                            d="m98.555534,96.723656c10.163826,-5.139496 14.551758,0.862907 12.0868,4.517342c1.208115,-3.891434 -1.690544,-5.428581 -4.414841,-5.344505c-4.586479,0.141548 -8.069458,2.236862 -9.714272,3.490234l2.042313,-2.663071z"
                            id="path3203" />
                        <path fill="#000000" fill-rule="evenodd" stroke-width="1px"
                            d="m58.019051,95.101761c-6.038658,-5.139496 -10.56234,2.497795 -5.521809,3.870255c-1.63295,-1.111443 -1.745609,-2.911575 -0.703129,-3.888573c1.259258,-0.838501 2.8288,-0.66758 4.367649,0.173721c1.37373,0.894508 2.422871,2.137413 3.038719,2.577415l-1.181431,-2.732819z"
                            id="path3205" />
                        <path fill="#000000" fill-rule="evenodd" stroke-width="1px" id="path3207"
                            d="m128.473007,95.431236c-1.828766,-0.564514 -2.640633,-1.472191 -2.751541,-2.679497c-0.159821,-1.756439 2.764709,-2.562317 4.26712,-1.858467c0.904297,0.423653 2.095947,1.477112 2.161728,2.730934c-0.137558,2.884293 -2.017838,4.212334 -4.404114,4.642593c-4.629776,0.834785 -12.369911,-4.743156 -18.284386,-5.698029c-6.083313,-0.982117 -8.542313,1.442291 -9.930016,3.267471c2.890503,-1.999573 6.323555,-2.460373 9.085625,-2.013962c6.337471,1.024284 12.225937,6.74202 19.129501,5.915146c3.506874,-0.541321 6.357719,-3.379112 5.4412,-6.727661c-1.440735,-4.681 -7.028336,-3.918884 -7.871872,-1.41317c-0.849831,2.524391 1.2752,4.000015 3.156754,3.834641z" />
                        <path fill="#000000" fill-rule="evenodd" stroke-width="1px"
                            d="m132.55899,95.490181c6.038666,-5.139488 9.457474,0.951004 6.715057,3.030571c1.143768,-2.395317 -0.507431,-3.941452 -2.126022,-3.857368c-2.724991,0.141548 -4.793228,2.86142 -5.770462,3.559624l1.181427,-2.732826z"
                            id="path3209" />
                    </g>
                    <path fill="none" fill-rule="evenodd" stroke="#000000" stroke-width="1px" id="path3215"
                        d="m139.78479,95.573318l45.490326,0c4.19426,0 5.282761,-1.635269 5.387146,-5.905899l0.059174,-76.8606c-0.039749,-4.66774 -1.966919,-6.32405 -7.616547,-6.28093l-43.245758,0" />
                </g>
            </svg>
            <div class="text">
                <h1 class="text-invisible">To: 薛淳旭 </h1>
                <div class="text-invisible">一年一下子就過去了，但是能跟妳在一起這件事依舊是很夢幻，國中的時候妳就是</div>
                <div class="text-invisible">跟我互動最多，也我是印象最深刻的人，但是當時並沒有甚麼特別的想法。</div>
                <div class="text-invisible">上了高中之後，回味起國中時的點點滴滴，我才發現到其實我是喜歡妳的，當時會</div>
                <div class="text-invisible">約妳出來念書，當然一部分的原因是為了想要讓自己更認真一點，但其實更多的是</div>
                <div class="text-invisible">不想錯過妳。現在回想起來，我那個時候並沒有抱著太多的期待，甚至連幻想我能</div>
                <div class="text-invisible">跟妳在一起都不敢，但最後還是妳先告的白。</div>
                <div class="text-invisible">所以謝謝妳，跟我在一起，真的最喜歡妳了，希望未來也能一直都跟寶貝在一起。</div>
                <div class="text-invisible last-date">2021/7/30</div>
            </div>
        </div>
        <div style="width: 100px; height: 100px;"></div>
    </div>
    <script>
        document.querySelectorAll(".gallery").forEach(elem => {
            new makeGallery(elem);
        });
    </script>

    <script>
        function getPosition(element) {
            var x = 0;
            var y = 0;
            while (element) {
                x += element.offsetLeft - element.scrollLeft + element.clientLeft;
                y += element.offsetTop - element.scrollLeft + element.clientTop;
                element = element.offsetParent;
            }
            return { x: x, y: y };
        }
        const card_list = document.querySelectorAll(".card");
        card_list.forEach(elem => {
            elem.on = {};
        });
        window.addEventListener('scroll', () => {
            let screen_margin = {
                top: window.pageYOffset,
                bottom: window.pageYOffset + document.body.clientHeight
            };
            card_list.forEach(elem => {
                let pos = getPosition(elem);
                let elem_margin = {
                    top: pos.y,
                    bottom: pos.y + elem.offsetHeight
                };
                if (screen_margin.top < elem_margin.top && screen_margin.bottom > elem_margin.bottom) {
                    if (elem.on.intoScreen)
                        elem.on.intoScreen();
                }
                if (!((screen_margin.top < elem_margin.bottom && screen_margin.bottom > elem_margin.bottom) ||
                    (screen_margin.top < elem_margin.top && screen_margin.bottom > elem_margin.top))) {
                    if (elem.on.outScreen)
                        elem.on.outScreen();
                }
            });
        });
        card_list.forEach(elem => {
            let orderDisplaying = null;
            const textList = [];
            try {
                elem.querySelector(".text").childNodes.forEach(elem => {
                    if (elem.nodeName == "H1" || elem.nodeName == "DIV")
                        textList.push(elem);
                });
                textList.push(document.createElement("div"));
                textList.push(document.createElement("div"));
                const gallery_container = elem.querySelector(".gallery-container");
                if (gallery_container)
                    textList.push(gallery_container);
            } catch (e) { }
            elem.on.intoScreen = () => {
                elem.classList.add("card-display");
                if (orderDisplaying == null) {
                    let i = 0, end = textList.length;
                    orderDisplaying = setInterval(() => {
                        if (i >= end) clearInterval(orderDisplaying);
                        textList[i++].classList.add("text-display");
                    }, 300);
                }
            }
            elem.on.outScreen = () => {
                elem.classList.remove("card-display");
                textList.forEach(elem => {
                    elem.classList.remove("text-display");
                });
                if (orderDisplaying != null) {
                    clearInterval(orderDisplaying);
                    orderDisplaying = null;
                }
            }
        });
    </script>

</body>

</html>